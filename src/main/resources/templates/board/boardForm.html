<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Create Board</title>
  <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css">
  <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
</head>
<body>
<h1>Create Board</h1>

<!-- 게시글 등록 폼 -->
<form th:action="@{/insertBoard}" method="post" id="boardForm">
  <label for="boardTitle">Title:</label>
  <input type="text" id="boardTitle" name="boardTitle" required>
  <br><br>

  <label for="boardContent">Content:</label>
  <!-- Toast UI Editor Container -->
  <div id="editor"></div>
  <!-- Hidden input to store editor content -->
  <input type="hidden" id="boardContent" name="boardContent">
  <br><br>

  <label for="userId">User ID:</label>
  <input type="number" id="userId" name="userId" required>
  <br><br>

  <button type="submit">Submit</button>
</form>

<!-- 돌아가기 버튼 -->
<a th:href="@{/boardList}">
  <button>Back to List</button>
</a>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Initialize Toast UI Editor
    const editor = new toastui.Editor({
      el: document.querySelector('#editor'), // Editor container
      height: '400px', // Editor height
      initialEditType: 'markdown', // Initial editor type (markdown or wysiwyg)
      previewStyle: 'vertical', // Split view (editor & preview)
      placeholder: '글을 입력하세요',
    });

    // Sync editor content with hidden input on form submit
    document.querySelector('#boardForm').addEventListener('submit', function () {
      const content = editor.getMarkdown(); // Get Markdown content
      document.querySelector('#boardContent').value = content;
    });
  });
</script>
</body>
</html>
